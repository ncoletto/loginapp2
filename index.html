<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Hermes Inteligente App</title>


<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/jquery.mobile-1.4.5.min.js"></script>    

<link rel="stylesheet" href="themes/hermes.min.css" />
<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
<link rel="stylesheet" href="js/jquery.mobile.structure-1.4.5.min.css" />
<link rel="stylesheet" type="text/css" href="css/style.css">

<script src="js/scripts.js"></script>

<link href='http://fonts.googleapis.com/css?family=Squada+One' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Russo+One' rel='stylesheet' type='text/css'>


    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
	
    document.addEventListener("deviceready", arrancar, false);

    // device APIs are available
    //

		function onSuccess(acceleration) {
			
			document.getElementById("incidente").innerHTML = acceleration.y;
			
			if(acceleration.y > 10) {
				
			//alert('Incidente detectado, enviando alerta sms...')
			window.plugins.socialsharing.shareViaSMS('Alerta SMS', '1161792834', function(msg) {console.log('ok: ' + msg)}, function(msg) {alert('error: ' + msg)})

		}
		}
		
		function onError() {
			alert('onError!');
		};
		
		function arrancar() {
		
		var options = { frequency: 1000 };  // Update every 3 seconds
		
		var watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);

		}

    </script>

</head>
<body>

<div data-role="page" id="demo-page" data-theme="a" data-url="demo-page">
    <div data-role="header" data-theme="a">
        <h1>Swipe left or right</h1>
        <a href="#left-panel" data-theme="a" data-icon="arrow-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open left panel</a>
        <a href="#right-panel" data-theme="a" data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open right panel</a>
    </div><!-- /header -->
    <div data-role="content">
        <dl>
            <dt>Swipe</dt>
        </dl>
    </div><!-- /content -->
    <div data-role="panel" id="left-panel" data-display="push" data-theme="a">
        <p>Left reveal panel.</p>
    </div><!-- /panel -->
    <div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="a">
        <p>Right push panel.</p>
    </div><!-- /panel -->
</div>


<script>
 
$('#formulario').submit(function() {
// recolecta los valores que inserto el usuario
var datosUsuario = $("#nombredeusuario").val()
var datosPassword = $("#clave").val()
var nombre = datosUsuario


archivoValidacion = "http://www.hermesinteligente.com/app/validacion_hermesinteligente.php?jsoncallback=?"
 
 
$.getJSON( archivoValidacion, { usuario:datosUsuario ,password:datosPassword})
.done(function(respuestaServer) {

if(respuestaServer.validacion == "ok"){
/// si la validacion es correcta, muestra la pantalla "tiempo"
$.mobile.changePage("#tiempo")

/// agrego el nombre de usuario en la configuracion
				$("#configuracion").append(nombre);

}else{
/// ejecutar una conducta cuando la validacion falla
    alert(respuestaServer.mensaje + "\n" + respuestaServer.hora + "\n" +respuestaServer.generador)
}
})
return false;
})
</script>




</body>
</html>
